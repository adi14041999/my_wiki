
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A personal wiki for notes, ideas, and projects.">
      
      
      
        <link rel="canonical" href="https://adi14041999.github.io/my_wiki/math/probability/conditional_expectation/">
      
      
        <link rel="prev" href="../beta_distributions/">
      
      
        <link rel="next" href="../jensens_inequality/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>Conditional Expectation - My Wiki</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#conditional-expectation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="My Wiki" class="md-header__button md-logo" aria-label="My Wiki" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            My Wiki
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Conditional Expectation
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="lime"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../ai/deep_generative_models/introduction/" class="md-tabs__link">
          
  
  
  AI

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
  
  
    
    
      
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../linear_algebra/vectors_vector_addition_and_scalar_multiplication/" class="md-tabs__link">
          
  
  
  Math

        </a>
      </li>
    
  

    
  

      
        
  
  
  
  
    
    
      
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../productivity/how_to_build_your_career_in_ai/three_steps_to_career_growth/" class="md-tabs__link">
          
  
  
  Productivity

        </a>
      </li>
    
  

    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="My Wiki" class="md-nav__button md-logo" aria-label="My Wiki" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    My Wiki
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    AI
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            AI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Deep Generative Models
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Deep Generative Models
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ai/deep_generative_models/introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ai/deep_generative_models/autoregressive_models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Autoregressive Models
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ai/deep_generative_models/variational_autoencoders/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Variational Autoencoders
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ai/deep_generative_models/normalizing_flow_models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Normalizing flow models
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ai/deep_generative_models/recap_at_this_point/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Recap at this point
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ai/deep_generative_models/generative_adversarial_networks/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Generative Adversarial Networks
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ai/deep_generative_models/energy_based_models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Energy Based Models
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ai/deep_generative_models/score_based_models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Score Based Models
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ai/deep_generative_models/score_based_generative_modeling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Score Based Generative Modeling
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ai/deep_generative_models/evaluating_generative_models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Evaluating Generative Models
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ai/deep_generative_models/score_based_diffusion_models/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Score Based Diffusion Models
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Deep Learning for Computer Vision
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Deep Learning for Computer Vision
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ai/deep_learning_for_computer_vision/introduction/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ai/deep_learning_for_computer_vision/image_classification_with_linear_classifiers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Image Classification with Linear Classifiers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ai/deep_learning_for_computer_vision/regularization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Regularization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ai/deep_learning_for_computer_vision/optimization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Optimization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ai/deep_learning_for_computer_vision/backpropagation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Backpropagation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ai/deep_learning_for_computer_vision/neural_networks_setting_up_the_architecture/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Neural Networks- Setting up the Architecture
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../ai/deep_learning_for_computer_vision/neural_networks_setting_up_the_data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Neural Networks- Setting up the Data
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Math
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Math
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Linear Algebra
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Linear Algebra
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linear_algebra/vectors_vector_addition_and_scalar_multiplication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vectors, vector addition, and scalar multiplication
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linear_algebra/vector_geometry_in_mathbb_r_n_and_correlation_coefficients/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Vector geometry in Rn and correlation coefficients
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linear_algebra/planes_in_r3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Planes in R3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linear_algebra/span_subspaces_and_dimension/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Span, subspaces, and dimension
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linear_algebra/basis_and_orthogonality/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Basis and orthogonality
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linear_algebra/projections/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Projections
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../linear_algebra/applications_of_projections_in_rn_orthogonal_bases_of_planes_and_linear_regression/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Applications of projections in Rn- orthogonal bases of planes and linear regression
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" checked>
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Probability
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Probability
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../probability_and_counting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Probability and Counting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../story_proofs_and_axioms_of_probability/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Story Proofs and Axioms of Probability
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../conditional_probability/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Conditional Probability
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../some_famous_problems/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Some famous problems
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../random_variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Random Variables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../expectation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Expectation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../indicator_random_variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Indicator Random Variables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../poisson_distribution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Poisson Distribution
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../continuous_distributions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Continuous Distributions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../normal_distribution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Normal Distribution
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../exponential_distribution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Exponential Distribution
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../joint_distributions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Joint Distributions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../independence_of_random_variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Independence of Random Variables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../conditional_distributions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Conditional Distributions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../multinomial_distribution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multinomial Distribution
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../covariance_and_correlation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Covariance and Correlation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../transformations_of_random_variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Transformations of Random Variables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../convolution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Convolution
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../beta_distributions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Beta Distributions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Conditional Expectation
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Conditional Expectation
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-two-envelope-paradox" class="md-nav__link">
    <span class="md-ellipsis">
      The Two Envelope Paradox
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#definition-of-conditional-expectation" class="md-nav__link">
    <span class="md-ellipsis">
      Definition of Conditional Expectation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Definition of Conditional Expectation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#discrete-case" class="md-nav__link">
    <span class="md-ellipsis">
      Discrete Case
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#continuous-case" class="md-nav__link">
    <span class="md-ellipsis">
      Continuous Case
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-random-variable-ex-y-and-its-intuitive-meaning" class="md-nav__link">
    <span class="md-ellipsis">
      The Random Variable \(E[X | Y]\) and its intuitive meaning
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#general-properties" class="md-nav__link">
    <span class="md-ellipsis">
      General Properties
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conditional-expectation-as-the-best-predictor" class="md-nav__link">
    <span class="md-ellipsis">
      Conditional Expectation as the Best Predictor
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Conditional Expectation as the Best Predictor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#case-study-linear-regression" class="md-nav__link">
    <span class="md-ellipsis">
      Case study: Linear Regression
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../jensens_inequality/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Jensen's inequality
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../central_limit_theorem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Central Limit Theorem
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../multivariate_normal_distribution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multivariate Normal Distribution
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../markov_chains/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Markov Chains
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Productivity
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Productivity
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    How to Build Your Career in AI
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            How to Build Your Career in AI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../productivity/how_to_build_your_career_in_ai/three_steps_to_career_growth/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Three Steps to Career Growth
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../productivity/how_to_build_your_career_in_ai/phase_1_learning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Phase 1- Learning
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../productivity/how_to_build_your_career_in_ai/phase_2_projects/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Phase 2- Projects
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../productivity/how_to_build_your_career_in_ai/phase_3_job/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Phase 3- Job
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="conditional-expectation">Conditional Expectation</h1>
<h2 id="the-two-envelope-paradox">The Two Envelope Paradox</h2>
<p>The two envelope paradox is a famous probability puzzle that challenges our intuition about conditional expectation and reveals subtle issues in reasoning about random variables.</p>
<p>You are given two envelopes. One contains twice as much money as the other. You pick one envelope at random, open it, and see that it contains $X. You are then given the choice to either:</p>
<ol>
<li>Keep the envelope you have (containing $X)</li>
<li>Switch to the other envelope</li>
</ol>
<p><strong>The question</strong>: Should you switch?</p>
<p>At first glance, it seems like switching should be beneficial.</p>
<p>The other envelope contains either $X/2 or $2X, each with probability 1/2. The expected value of switching is:</p>
<div class="arithmatex">\[E[\text{other envelope}] = \frac{1}{2} \cdot \frac{X}{2} + \frac{1}{2} \cdot 2X = \frac{X}{4} + X = \frac{5X}{4}\]</div>
<p>Since <span class="arithmatex">\(\frac{5X}{4} &gt; X\)</span>, you should always switch!</p>
<p><strong>The paradox</strong>: This reasoning suggests you should always switch, regardless of which envelope you initially chose. But this is clearly wrong- if you always switch, you're back to a 50-50 choice!</p>
<p>The error lies in assuming that the other envelope contains <span class="arithmatex">\(X/2\)</span> or <span class="arithmatex">\(2X\)</span> with equal probability 1/2.</p>
<p>Let's be more careful about the random variables involved.</p>
<p>Let <span class="arithmatex">\(A\)</span> be the amount in the first envelope, and <span class="arithmatex">\(2A\)</span> be the amount in the second envelope. The envelopes are chosen randomly, so:</p>
<ul>
<li>
<p><span class="arithmatex">\(P(\text{you pick first}) = \frac{1}{2}\)</span></p>
</li>
<li>
<p><span class="arithmatex">\(P(\text{you pick second}) = \frac{1}{2}\)</span></p>
</li>
</ul>
<p><strong>Case 1</strong>: You picked the first envelope (contains <span class="arithmatex">\(A\)</span>)</p>
<ul>
<li>
<p>The other envelope contains <span class="arithmatex">\(2A\)</span></p>
</li>
<li>
<p>If you switch, you gain <span class="arithmatex">\(A\)</span></p>
</li>
</ul>
<p><strong>Case 2</strong>: You picked the second envelope (contains <span class="arithmatex">\(2A\)</span>)</p>
<ul>
<li>
<p>The other envelope contains <span class="arithmatex">\(A\)</span></p>
</li>
<li>
<p>If you switch, you lose <span class="arithmatex">\(A\)</span></p>
</li>
</ul>
<p><strong>Expected gain from switching</strong>:</p>
<div class="arithmatex">\[E[\text{gain from switching}] = \frac{1}{2} \cdot A + \frac{1}{2} \cdot (-A) = 0\]</div>
<p><strong>Conclusion</strong>: There is no expected gain from switching. The correct strategy is to be indifferent between keeping and switching.</p>
<p>The original reasoning made a subtle error by treating <span class="arithmatex">\(X\)</span> as if it were independent of which envelope you chose. But <span class="arithmatex">\(X\)</span> is not independent- it depends on whether you picked the first or second envelope.</p>
<h2 id="definition-of-conditional-expectation">Definition of Conditional Expectation</h2>
<p>Conditional expectation is the expected value of a random variable given that we know the value of another random variable. It's a fundamental concept in probability theory that allows us to make predictions based on partial information.</p>
<h3 id="discrete-case">Discrete Case</h3>
<p>For discrete random variables <span class="arithmatex">\(X\)</span> and <span class="arithmatex">\(Y\)</span>, the conditional expectation of <span class="arithmatex">\(X\)</span> given <span class="arithmatex">\(Y = y\)</span> is:</p>
<div class="arithmatex">\[E[X | Y = y] = \sum_x x \cdot P(X = x | Y = y) = \sum_x x \cdot \frac{P(X = x, Y = y)}{P(Y = y)}\]</div>
<p><strong>Key properties:</strong></p>
<ul>
<li>
<p><span class="arithmatex">\(E[X | Y = y]\)</span> is a function of <span class="arithmatex">\(y\)</span></p>
</li>
<li>
<p>It represents the average value of <span class="arithmatex">\(X\)</span> when we know <span class="arithmatex">\(Y = y\)</span></p>
</li>
<li>
<p>If <span class="arithmatex">\(X\)</span> and <span class="arithmatex">\(Y\)</span> are independent, then <span class="arithmatex">\(E[X | Y = y] = E[X]\)</span> for all <span class="arithmatex">\(y\)</span></p>
</li>
</ul>
<h3 id="continuous-case">Continuous Case</h3>
<p>For continuous random variables <span class="arithmatex">\(X\)</span> and <span class="arithmatex">\(Y\)</span> with joint density <span class="arithmatex">\(f_{X,Y}(x,y)\)</span> and marginal density <span class="arithmatex">\(f_Y(y)\)</span>, the conditional expectation of <span class="arithmatex">\(X\)</span> given <span class="arithmatex">\(Y = y\)</span> is:</p>
<div class="arithmatex">\[E[X | Y = y] = \int_{-\infty}^{\infty} x \cdot f_{X|Y}(x|y) \, dx = \int_{-\infty}^{\infty} x \cdot \frac{f_{X,Y}(x,y)}{f_Y(y)} \, dx\]</div>
<p>where <span class="arithmatex">\(f_{X|Y}(x|y) = \frac{f_{X,Y}(x,y)}{f_Y(y)}\)</span> is the conditional density of <span class="arithmatex">\(X\)</span> given <span class="arithmatex">\(Y = y\)</span>.</p>
<h2 id="the-random-variable-ex-y-and-its-intuitive-meaning">The Random Variable <span class="arithmatex">\(E[X | Y]\)</span> and its intuitive meaning</h2>
<p>Conditional expectation is itself a random variable! We write <span class="arithmatex">\(E[X | Y]\)</span> to denote the random variable that takes the value <span class="arithmatex">\(E[X | Y = y]\)</span> when <span class="arithmatex">\(Y = y\)</span>.</p>
<p>Conditional expectation answers the question: "What is the average value of <span class="arithmatex">\(X\)</span> when we know that <span class="arithmatex">\(Y\)</span> takes a specific value?"</p>
<p><strong>Example</strong>: If <span class="arithmatex">\(X\)</span> is your test score and <span class="arithmatex">\(Y\)</span> is the number of hours you studied:</p>
<ul>
<li>
<p><span class="arithmatex">\(E[X | Y = 0]\)</span> = average test score for students who didn't study</p>
</li>
<li>
<p><span class="arithmatex">\(E[X | Y = 10]\)</span> = average test score for students who studied 10 hours</p>
</li>
<li>
<p><span class="arithmatex">\(E[X | Y]\)</span> = a function that tells you the expected test score for any amount of study time</p>
</li>
</ul>
<p><strong>Example</strong>: Let <span class="arithmatex">\(X \sim N(0, 1)\)</span> and <span class="arithmatex">\(Y = X^2\)</span>. What is <span class="arithmatex">\(E[Y | X]\)</span>?</p>
<p>Since <span class="arithmatex">\(Y = X^2\)</span>, when we know the value of <span class="arithmatex">\(X\)</span>, we know exactly what <span class="arithmatex">\(Y\)</span> is. Therefore:</p>
<div class="arithmatex">\[E[Y | X = x] = E[X^2 | X = x] = E[x^2 | X = x] = x^2\]</div>
<p>This makes intuitive sense: if we know <span class="arithmatex">\(X = x\)</span>, then we know <span class="arithmatex">\(Y = x^2\)</span> with certainty, so the expected value of <span class="arithmatex">\(Y\)</span> given <span class="arithmatex">\(X = x\)</span> is simply <span class="arithmatex">\(x^2\)</span>.</p>
<p><strong>Key insight</strong>: When <span class="arithmatex">\(Y\)</span> is a function of <span class="arithmatex">\(X\)</span>, the conditional expectation <span class="arithmatex">\(E[Y | X]\)</span> is just that function evaluated at <span class="arithmatex">\(X\)</span>. In this case, <span class="arithmatex">\(E[Y | X] = X^2\)</span>.</p>
<p>It's important to distinguish between <span class="arithmatex">\(X^2\)</span> and <span class="arithmatex">\(x^2\)</span>. <strong><span class="arithmatex">\(X^2\)</span></strong> is a <strong>random variable</strong>- it represents the square of the random variable <span class="arithmatex">\(X\)</span>. Since <span class="arithmatex">\(X\)</span> can take different values, <span class="arithmatex">\(X^2\)</span> can also take different values. <strong><span class="arithmatex">\(x^2\)</span></strong> is a <strong>specific number</strong> - it's the square of a particular observed value <span class="arithmatex">\(x\)</span> of the random variable <span class="arithmatex">\(X\)</span>.</p>
<p><strong>In our example:</strong></p>
<ul>
<li>
<p><span class="arithmatex">\(X \sim N(0,1)\)</span> - <span class="arithmatex">\(X\)</span> is a random variable that can take any real value</p>
</li>
<li>
<p><span class="arithmatex">\(X^2\)</span> - This is also a random variable (the square of <span class="arithmatex">\(X\)</span>)</p>
</li>
<li>
<p><span class="arithmatex">\(x\)</span> - This is a specific observed value of <span class="arithmatex">\(X\)</span> (like <span class="arithmatex">\(x = 1.5\)</span> or <span class="arithmatex">\(x = -0.3\)</span>)</p>
</li>
<li>
<p><span class="arithmatex">\(x^2\)</span> - This is the square of that specific value (like <span class="arithmatex">\(1.5^2 = 2.25\)</span> or <span class="arithmatex">\((-0.3)^2 = 0.09\)</span>)</p>
</li>
</ul>
<p>When we write <span class="arithmatex">\(E[Y | X = x]\)</span>, we're asking: "What's the expected value of <span class="arithmatex">\(Y\)</span> given that <span class="arithmatex">\(X\)</span> takes the specific value <span class="arithmatex">\(x\)</span>?" Since <span class="arithmatex">\(Y = X^2\)</span>, when <span class="arithmatex">\(X = x\)</span>, we know <span class="arithmatex">\(Y = x^2\)</span> (a specific number). So <span class="arithmatex">\(E[Y | X = x] = E[x^2 | X = x] = x^2\)</span></p>
<p>Now let's compute <span class="arithmatex">\(E[X | Y]\)</span> for the same example. This is more interesting because knowing <span class="arithmatex">\(Y = y\)</span> doesn't completely determine <span class="arithmatex">\(X\)</span>- there are two possible values of <span class="arithmatex">\(X\)</span> that give <span class="arithmatex">\(Y = y\)</span>.</p>
<p>If <span class="arithmatex">\(Y = y\)</span>, then <span class="arithmatex">\(X = \pm\sqrt{y}\)</span> (since <span class="arithmatex">\(Y = X^2\)</span>).</p>
<p>Since <span class="arithmatex">\(X \sim N(0,1)\)</span> is symmetric about 0, both <span class="arithmatex">\(+\sqrt{y}\)</span> and <span class="arithmatex">\(-\sqrt{y}\)</span> are equally likely when <span class="arithmatex">\(Y = y\)</span>.</p>
<div class="arithmatex">\[E[X | Y = y] = \sqrt{y} \cdot P(X = \sqrt{y} | Y = y) + (-\sqrt{y}) \cdot P(X = -\sqrt{y} | Y = y)\]</div>
<p>Since <span class="arithmatex">\(X \sim N(0,1)\)</span> is symmetric about 0:</p>
<ul>
<li>
<p><span class="arithmatex">\(P(X = \sqrt{y}) = P(X = -\sqrt{y})\)</span> (by symmetry)</p>
</li>
<li>
<p>Therefore: <span class="arithmatex">\(P(X = \sqrt{y} | Y = y) = P(X = -\sqrt{y} | Y = y)\)</span></p>
</li>
</ul>
<p>Since these are the only two possibilities when <span class="arithmatex">\(Y = y\)</span>, and they're equal:</p>
<div class="arithmatex">\[P(X = \sqrt{y} | Y = y) = P(X = -\sqrt{y} | Y = y) = \frac{1}{2}\]</div>
<p>When we condition on <span class="arithmatex">\(Y = y\)</span>, we're essentially asking: "Given that <span class="arithmatex">\(X^2 = y\)</span>, what's the probability that <span class="arithmatex">\(X = \sqrt{y}\)</span> vs <span class="arithmatex">\(X = -\sqrt{y}\)</span>?"</p>
<p>Since the normal distribution is symmetric about 0, the probability density at <span class="arithmatex">\(+\sqrt{y}\)</span> is exactly the same as the probability density at <span class="arithmatex">\(-\sqrt{y}\)</span>. When we condition on <span class="arithmatex">\(Y = y\)</span>, we're restricting ourselves to these two equally likely points.</p>
<div class="arithmatex">\[E[X | Y = y] = \sqrt{y} \cdot \frac{1}{2} + (-\sqrt{y}) \cdot \frac{1}{2} = \frac{\sqrt{y} - \sqrt{y}}{2} = 0\]</div>
<p><strong>Result</strong>: <span class="arithmatex">\(E[X | Y = y] = 0\)</span> for all <span class="arithmatex">\(y &gt; 0\)</span>.</p>
<p><strong>Key insight</strong>: Even though knowing <span class="arithmatex">\(Y\)</span> gives us information about the magnitude of <span class="arithmatex">\(X\)</span> (since <span class="arithmatex">\(|X| = \sqrt{Y}\)</span>), it doesn't give us information about the sign of <span class="arithmatex">\(X\)</span>. Due to the symmetry of the normal distribution, the positive and negative values cancel out, giving an expected value of 0.</p>
<p><strong>Example:</strong> Let's consider a more complex example involving continuous random variables and uniform distributions.</p>
<p>We have a stick of length <span class="arithmatex">\(L\)</span>.
<strong>First break</strong>: Break the stick at a point <span class="arithmatex">\(Y\)</span> chosen uniformly at random along its length. This means <span class="arithmatex">\(Y \sim \text{Uniform}(0, L)\)</span>.
<strong>Second break</strong>: Take the remaining piece of the stick (which has length <span class="arithmatex">\(Y\)</span>) and break it at a point <span class="arithmatex">\(X\)</span> chosen uniformly at random along this remaining length.</p>
<p><strong>Question</strong>: What is <span class="arithmatex">\(E[X | Y]\)</span>?</p>
<p>Given that <span class="arithmatex">\(Y = y\)</span>, we know:</p>
<ul>
<li>
<p>The remaining piece has length <span class="arithmatex">\(y\)</span></p>
</li>
<li>
<p><span class="arithmatex">\(X\)</span> is chosen uniformly at random from <span class="arithmatex">\([0, y]\)</span></p>
</li>
<li>
<p>Therefore: <span class="arithmatex">\(X | Y = y \sim \text{Uniform}(0, y)\)</span></p>
</li>
</ul>
<p>For a uniform distribution on <span class="arithmatex">\([0, y]\)</span>, the expected value is the midpoint:</p>
<div class="arithmatex">\[E[X | Y = y] = \frac{0 + y}{2} = \frac{y}{2}\]</div>
<p><strong>Result</strong>: <span class="arithmatex">\(E[X | Y] = \frac{Y}{2}\)</span></p>
<p>This makes perfect sense! If we know the remaining piece has length <span class="arithmatex">\(y\)</span>, then the expected position of the second break is exactly in the middle of that piece, which is <span class="arithmatex">\(\frac{y}{2}\)</span>.</p>
<p>Let's verify this:</p>
<p><strong>Step 1</strong>: Find <span class="arithmatex">\(E[X]\)</span> directly</p>
<ul>
<li>
<p><span class="arithmatex">\(Y \sim \text{Uniform}(0, L)\)</span>, so <span class="arithmatex">\(E[Y] = \frac{L}{2}\)</span></p>
</li>
<li>
<p><span class="arithmatex">\(E[X] = E[E[X | Y]] = E\left[\frac{Y}{2}\right] = \frac{E[Y]}{2} = \frac{L}{4}\)</span> (we will prove later why <span class="arithmatex">\(E[X] = E[E[X | Y]] = E\left[\frac{Y}{2}\right]\)</span>, but it is a property)</p>
</li>
</ul>
<p><strong>Step 2</strong>: Find <span class="arithmatex">\(E[X]\)</span> using the joint distribution</p>
<ul>
<li>Calculate the joint density</li>
</ul>
<div class="arithmatex">\[f_{X,Y}(x,y) = f_{X|Y}(x|y) \cdot f_Y(y) = \frac{1}{y} \cdot \frac{1}{L} = \frac{1}{Ly}\]</div>
<p>The joint density of <span class="arithmatex">\((X, Y)\)</span> is <span class="arithmatex">\(f_{X,Y}(x,y) = \frac{1}{Ly}\)</span> for <span class="arithmatex">\(0 \leq x \leq y \leq L\)</span></p>
<ul>
<li><span class="arithmatex">\(E[X] = \int_0^L \int_0^y x \cdot \frac{1}{Ly} \, dx \, dy = \int_0^L \frac{y}{2L} \, dy = \frac{L}{4}\)</span></li>
</ul>
<p>Both methods give the same result, confirming our calculation is correct.</p>
<h2 id="general-properties">General Properties</h2>
<p><strong>1. Taking out what's known</strong></p>
<p>One of the most important properties of conditional expectation is the ability to "take out what's known":</p>
<div class="arithmatex">\[E[h(X)Y | X] = h(X)E[Y | X]\]</div>
<p>where <span class="arithmatex">\(h(X)\)</span> is any function of <span class="arithmatex">\(X\)</span>.</p>
<p><strong>Intuitive explanation</strong>: If we know the value of <span class="arithmatex">\(X\)</span>, then <span class="arithmatex">\(h(X)\)</span> is just a constant (not random), so we can factor it out of the conditional expectation.</p>
<p><strong>Proof for discrete case</strong>:</p>
<div class="arithmatex">\[E[h(X)Y | X = x] = \sum_y h(x) \cdot y \cdot P(Y = y | X = x) = h(x) \sum_y y \cdot P(Y = y | X = x) = h(x)E[Y | X = x]\]</div>
<p><strong>Proof for continuous case</strong>:</p>
<div class="arithmatex">\[E[h(X)Y | X = x] = \int_{-\infty}^{\infty} h(x) \cdot y \cdot f_{Y|X}(y|x) \, dy = h(x) \int_{-\infty}^{\infty} y \cdot f_{Y|X}(y|x) \, dy = h(x)E[Y | X = x]\]</div>
<p><strong>Examples</strong>:</p>
<ul>
<li>
<p><span class="arithmatex">\(E[X^2Y | X] = X^2E[Y | X]\)</span> (since <span class="arithmatex">\(X^2\)</span> is a function of <span class="arithmatex">\(X\)</span>)</p>
</li>
<li>
<p><span class="arithmatex">\(E[\sin(X)Y | X] = \sin(X)E[Y | X]\)</span> (since <span class="arithmatex">\(\sin(X)\)</span> is a function of <span class="arithmatex">\(X\)</span>)</p>
</li>
<li>
<p><span class="arithmatex">\(E[3Y | X] = 3E[Y | X]\)</span> (since 3 is a constant function of <span class="arithmatex">\(X\)</span>)</p>
</li>
</ul>
<p><strong>2. Independence property</strong></p>
<p>If <span class="arithmatex">\(X\)</span> and <span class="arithmatex">\(Y\)</span> are independent, then:</p>
<div class="arithmatex">\[E[Y | X] = E[Y]\]</div>
<p><strong>Intuitive explanation</strong>: If <span class="arithmatex">\(X\)</span> and <span class="arithmatex">\(Y\)</span> are independent, then knowing the value of <span class="arithmatex">\(X\)</span> provides no information about <span class="arithmatex">\(Y\)</span>. Therefore, the conditional expectation of <span class="arithmatex">\(Y\)</span> given <span class="arithmatex">\(X\)</span> is the same as the unconditional expectation of <span class="arithmatex">\(Y\)</span>.</p>
<p><strong>Proof for discrete case</strong>:</p>
<div class="arithmatex">\[E[Y | X = x] = \sum_y y \cdot P(Y = y | X = x) = \sum_y y \cdot P(Y = y) = E[Y]\]</div>
<p>where the second equality uses the fact that <span class="arithmatex">\(P(Y = y | X = x) = P(Y = y)\)</span> when <span class="arithmatex">\(X\)</span> and <span class="arithmatex">\(Y\)</span> are independent.</p>
<p><strong>Proof for continuous case</strong>:</p>
<div class="arithmatex">\[E[Y | X = x] = \int_{-\infty}^{\infty} y \cdot f_{Y|X}(y|x) \, dy = \int_{-\infty}^{\infty} y \cdot f_Y(y) \, dy = E[Y]\]</div>
<p>where the second equality uses the fact that <span class="arithmatex">\(f_{Y|X}(y|x) = f_Y(y)\)</span> when <span class="arithmatex">\(X\)</span> and <span class="arithmatex">\(Y\)</span> are independent.</p>
<p><strong>Examples</strong>:</p>
<ul>
<li>
<p>If <span class="arithmatex">\(X \sim N(0,1)\)</span> and <span class="arithmatex">\(Y \sim N(0,1)\)</span> are independent, then <span class="arithmatex">\(E[Y | X] = E[Y] = 0\)</span></p>
</li>
<li>
<p>If <span class="arithmatex">\(X\)</span> is the number of heads in 10 coin flips and <span class="arithmatex">\(Y\)</span> is the temperature tomorrow, and they're independent, then <span class="arithmatex">\(E[Y | X] = E[Y]\)</span></p>
</li>
</ul>
<p><strong>3. Iterated expectation (Adam's Law)</strong></p>
<p>The expectation of a conditional expectation equals the original expectation:</p>
<div class="arithmatex">\[E[E[Y | X]] = E[Y]\]</div>
<p><strong>Proof for discrete case</strong>:</p>
<div class="arithmatex">\[E[E[Y | X]] = \sum_x E[Y | X = x] \cdot P(X = x) = \sum_x \left(\sum_y y \cdot P(Y = y | X = x)\right) \cdot P(X = x)\]</div>
<div class="arithmatex">\[= \sum_x \sum_y y \cdot P(Y = y | X = x) \cdot P(X = x) = \sum_x \sum_y y \cdot P(X = x, Y = y) = \sum_y y \cdot P(Y = y) = E[Y]\]</div>
<p><strong>Proof for continuous case</strong>:</p>
<div class="arithmatex">\[E[E[Y | X]] = \int_{-\infty}^{\infty} E[Y | X = x] \cdot f_X(x) \, dx = \int_{-\infty}^{\infty} \left(\int_{-\infty}^{\infty} y \cdot f_{Y|X}(y|x) \, dy\right) f_X(x) \, dx\]</div>
<div class="arithmatex">\[= \int_{-\infty}^{\infty} \int_{-\infty}^{\infty} y \cdot f_{Y|X}(y|x) f_X(x) \, dy \, dx = \int_{-\infty}^{\infty} \int_{-\infty}^{\infty} y \cdot f_{X,Y}(x,y) \, dy \, dx = E[Y]\]</div>
<p><strong>Examples</strong>:</p>
<ul>
<li>
<p>In our stick-breaking example: <span class="arithmatex">\(E[E[X | Y]] = E\left[\frac{Y}{2}\right] = \frac{E[Y]}{2} = \frac{L}{4} = E[X]\)</span></p>
</li>
<li>
<p>If <span class="arithmatex">\(Y\)</span> is test score and <span class="arithmatex">\(X\)</span> is study hours: <span class="arithmatex">\(E[E[Y | X]] = E[Y]\)</span> (the average test score across all students)</p>
</li>
</ul>
<p><strong>Why this matters</strong>: This property is fundamental to many probability calculations. It allows us to compute expectations by first conditioning on another variable, then taking the expectation of the conditional expectation. It's often easier to compute <span class="arithmatex">\(E[Y | X]\)</span> first, then take its expectation, rather than computing <span class="arithmatex">\(E[Y]\)</span> directly.</p>
<p><strong>4. Residual property</strong></p>
<div class="arithmatex">\[E[(Y - E[Y | X])h(X)] = 0\]</div>
<p><strong>Proof</strong>:</p>
<div class="arithmatex">\[E[(Y - E[Y | X])h(X)] = E[Y \cdot h(X) - E[Y | X] \cdot h(X)]\]</div>
<div class="arithmatex">\[= E[Y \cdot h(X)] - E[E[Y | X] \cdot h(X)]\]</div>
<div class="arithmatex">\[= E[Y \cdot h(X)] - E[h(X) \cdot E[Y | X]]\]</div>
<p>Now, using the "taking out what's known" property:</p>
<div class="arithmatex">\[E[h(X) \cdot E[Y | X]] = E[h(X) \cdot E[Y | X]] = E[E[h(X) \cdot Y | X]] = E[h(X) \cdot Y]\]</div>
<p>Therefore:</p>
<div class="arithmatex">\[E[(Y - E[Y | X])h(X)] = E[Y \cdot h(X)] - E[h(X) \cdot Y] = 0\]</div>
<p><strong>Correlation interpretation</strong>:</p>
<p>Since <span class="arithmatex">\(E[(Y - E[Y | X])h(X)] = 0\)</span>, we have:</p>
<div class="arithmatex">\[\text{Cov}(Y - E[Y | X], h(X)) = E[(Y - E[Y | X])h(X)] - E[Y - E[Y | X]] \cdot E[h(X)] = 0 - 0 \cdot E[h(X)] = 0\]</div>
<p>This shows that the residual <span class="arithmatex">\(Y - E[Y | X]\)</span> is uncorrelated with any function <span class="arithmatex">\(h(X)\)</span> of <span class="arithmatex">\(X\)</span>.</p>
<p><strong>Intuitive explanation</strong>: The residual <span class="arithmatex">\(Y - E[Y | X]\)</span> represents the part of <span class="arithmatex">\(Y\)</span> that cannot be predicted from <span class="arithmatex">\(X\)</span>. Since we've already extracted all the information that <span class="arithmatex">\(X\)</span> can provide about <span class="arithmatex">\(Y\)</span> (in the form of <span class="arithmatex">\(E[Y | X]\)</span>), the remaining part should be uncorrelated with any function of <span class="arithmatex">\(X\)</span>.</p>
<p><strong>Examples</strong>:</p>
<ul>
<li>
<p><span class="arithmatex">\(E[(Y - E[Y | X])X] = 0\)</span> (residual is uncorrelated with <span class="arithmatex">\(X\)</span>)</p>
</li>
<li>
<p><span class="arithmatex">\(E[(Y - E[Y | X])X^2] = 0\)</span> (residual is uncorrelated with <span class="arithmatex">\(X^2\)</span>)</p>
</li>
<li>
<p><span class="arithmatex">\(E[(Y - E[Y | X])\sin(X)] = 0\)</span> (residual is uncorrelated with <span class="arithmatex">\(\sin(X)\)</span>)</p>
</li>
</ul>
<p><strong>Geometric interpretation (Projection)</strong>: The conditional expectation <span class="arithmatex">\(E[Y | X]\)</span> is the projection of <span class="arithmatex">\(Y\)</span> onto the space of all functions of <span class="arithmatex">\(X\)</span>, shown below as a plane. This is because in a certain sense, <span class="arithmatex">\(E[Y | X]\)</span> is the function of <span class="arithmatex">\(X\)</span> that is closest to <span class="arithmatex">\(Y\)</span>; we say that <span class="arithmatex">\(E[Y | X]\)</span> is the projection of <span class="arithmatex">\(Y\)</span> into the space of all functions of <span class="arithmatex">\(X\)</span>.The residual <span class="arithmatex">\(Y - E[Y | X]\)</span> is orthogonal to the plane: it's perpendicular to (uncorrelated with) any function of <span class="arithmatex">\(X\)</span>.</p>
<p><img alt="image" src="../projection.png" /></p>
<p>The "line" from <span class="arithmatex">\(Y\)</span> to <span class="arithmatex">\(E[Y | X]\)</span> in the figure is orthogonal (perpendicular) to the "plane", since any other route from <span class="arithmatex">\(Y\)</span> to <span class="arithmatex">\(E[Y | X]\)</span> would be longer. This orthogonality turns out to be the geometric interpretation of the residual property.</p>
<h2 id="conditional-expectation-as-the-best-predictor">Conditional Expectation as the Best Predictor</h2>
<p>We can think of <span class="arithmatex">\(E[Y | X]\)</span> as a prediction for <span class="arithmatex">\(Y\)</span> based on <span class="arithmatex">\(X\)</span>. This is an extremely common problem in statistics: predict or estimate the future observations or unknown parameters based on data. The projection interpretation of conditional expectation implies that <span class="arithmatex">\(E[Y | X]\)</span> is the best predictor of <span class="arithmatex">\(Y\)</span> based on <span class="arithmatex">\(X\)</span>, in the sense that it is the function of <span class="arithmatex">\(X\)</span> with the lowest mean squared error (expected squared difference between <span class="arithmatex">\(Y\)</span> and the prediction of <span class="arithmatex">\(Y\)</span>).</p>
<p><strong>Mathematical statement</strong>: For any function <span class="arithmatex">\(g(X)\)</span> of <span class="arithmatex">\(X\)</span>:</p>
<div class="arithmatex">\[E[(Y - E[Y | X])^2] \leq E[(Y - g(X))^2]\]</div>
<p><strong>Proof</strong>: Let <span class="arithmatex">\(g(X)\)</span> be any function of <span class="arithmatex">\(X\)</span>. Then:</p>
<div class="arithmatex">\[E[(Y - g(X))^2] = E[(Y - E[Y | X] + E[Y | X] - g(X))^2]\]</div>
<div class="arithmatex">\[= E[(Y - E[Y | X])^2] + E[(E[Y | X] - g(X))^2] + 2E[(Y - E[Y | X])(E[Y | X] - g(X))]\]</div>
<p>The cross term is zero because <span class="arithmatex">\(E[Y | X] - g(X)\)</span> is a function of <span class="arithmatex">\(X\)</span>, and we know that <span class="arithmatex">\(Y - E[Y | X]\)</span> is uncorrelated with any function of <span class="arithmatex">\(X\)</span>. Therefore:</p>
<div class="arithmatex">\[E[(Y - g(X))^2] = E[(Y - E[Y | X])^2] + E[(E[Y | X] - g(X))^2] \geq E[(Y - E[Y | X])^2]\]</div>
<p>The equality holds if and only if <span class="arithmatex">\(g(X) = E[Y | X]\)</span> (almost surely).</p>
<p><strong>Why this matters</strong>: This shows that conditional expectation is not just a convenient mathematical tool, but the optimal predictor in the mean squared error sense. This is why it's so fundamental to statistics, machine learning, and any field that involves prediction.</p>
<h3 id="case-study-linear-regression">Case study: Linear Regression</h3>
<p>An extremely widely used method for data analysis in statistics is linear regression. In its most basic form, the linear regression model uses a single explanatory variable <span class="arithmatex">\(X\)</span> to predict a response variable <span class="arithmatex">\(Y\)</span>, and it assumes that the conditional expectation of <span class="arithmatex">\(Y\)</span> is linear in <span class="arithmatex">\(X\)</span>:</p>
<div class="arithmatex">\[E[Y | X] = a + bX\]</div>
<p><strong>Show that an equivalent way to express this is to write</strong></p>
<div class="arithmatex">\[Y = a + bX + \epsilon\]</div>
<p>where <span class="arithmatex">\(\epsilon\)</span> is an r.v. (called the error) with <span class="arithmatex">\(E[\epsilon | X] = 0\)</span>.</p>
<p><strong>Solution</strong>: Let <span class="arithmatex">\(Y = a + bX + \epsilon\)</span>, with <span class="arithmatex">\(E[\epsilon | X] = 0\)</span>. Then by linearity:</p>
<div class="arithmatex">\[E[Y | X] = E[a | X] + E[bX | X] + E[\epsilon | X] = a + bX\]</div>
<p>Conversely, suppose that <span class="arithmatex">\(E[Y | X] = a + bX\)</span>, and define:</p>
<div class="arithmatex">\[\epsilon = Y - (a + bX)\]</div>
<p>Then <span class="arithmatex">\(Y = a + bX + \epsilon\)</span>, with:</p>
<div class="arithmatex">\[E[\epsilon | X] = E[Y | X] - E[a + bX | X] = E[Y | X] - (a + bX) = 0\]</div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2025 <a href="https://github.com/adi14041999"  target="_blank" rel="noopener">Aditya Prabhu</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>